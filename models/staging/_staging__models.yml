version: 2

models:
  - name: stg_events
    description: |
      Cleaned and standardized events from raw source data.
      Handles deduplication, timestamp normalization, and data quality issues.
    columns:
      - name: event_id
        description: Unique identifier for the event
        tests:
          - unique
          - not_null
      - name: event_type
        description: Type of event
        tests:
          - not_null
      - name: device_id
        description: Device that generated the event (nullable for user-only events)
      - name: user_id
        description: User associated with the event (normalized to lowercase)
      - name: event_timestamp
        description: Event timestamp normalized to UTC
        tests:
          - not_null
      - name: payload
        description: JSON payload with event-specific data
